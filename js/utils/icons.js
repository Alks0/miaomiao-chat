/**
 * SVG å›¾æ ‡å®šä¹‰
 * é£æ ¼ï¼šDuckDB/MotherDuck - ç®€æ´çº¿æ¡ï¼Œ1.5px æè¾¹
 * ä¸»é¢˜è‰²ï¼šDuckDB Yellow (#FFF100)
 */

export const icons = {
    // å·¥å…·ç›¸å…³
    tool: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>',
    search: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>',
    settings: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6m5.2-13.2l-1.4 1.4M10.2 14.8l-1.4 1.4m8.4-1.4l-1.4-1.4M10.2 9.2L8.8 7.8m12.4 4.2h-6m-6 0H3"/></svg>',

    // åŒ…å’Œæ¨¡å—
    package: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="m7.5 4.27 9 5.15"/><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7 8.7 5 8.7-5"/><path d="M12 22V12"/></svg>',
    plug: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 22v-5"/><path d="M9 8V2"/><path d="M15 8V2"/><path d="M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z"/></svg>',

    // çŠ¶æ€ï¼ˆç®€æ´åœ†å½¢ï¼‰
    checkCircle: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>',
    xCircle: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/></svg>',
    clock: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>',
    loader: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 12a9 9 0 1 1-6.219-8.56"/></svg>',
    alertCircle: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>',

    // ç½‘ç»œ
    globe: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="M2 12h20"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>',

    // æ–‡æ¡£å’Œç¼–è¾‘
    fileText: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><line x1="10" y1="9" x2="8" y2="9"/></svg>',
    edit: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>',

    // æ•°æ®å’Œç»Ÿè®¡
    barChart: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>',

    // æ–‡æœ¬
    type: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><polyline points="4 7 4 4 20 4 20 7"/><line x1="9" y1="20" x2="15" y2="20"/><line x1="12" y1="4" x2="12" y2="20"/></svg>',

    // å…¶ä»–
    star: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>',
    circle: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/></svg>',
    circleFill: '<svg viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/></svg>',
    plus: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>',
    x: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>',
    computer: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>',
    folder: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>',
    pin: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><line x1="12" y1="17" x2="12" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/></svg>',
    message: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>'
};

/**
 * è·å– SVG å›¾æ ‡
 * @param {string} name - å›¾æ ‡åç§°
 * @param {Object} options - é€‰é¡¹ {size, className}
 * @returns {string} SVG HTML å­—ç¬¦ä¸²
 */
export function getIcon(name, options = {}) {
    const { size = 16, className = '' } = options;
    const svg = icons[name] || icons.tool;

    // æ·»åŠ  width, height å’Œ class å±æ€§
    return svg
        .replace(/^<svg/, `<svg width="${size}" height="${size}"`)
        .replace(/^<svg([^>]+)>/, `<svg$1 class="icon ${className}">`);
}

/**
 * åˆ›å»º SVG å›¾æ ‡å…ƒç´ ï¼ˆDOMï¼‰
 * @param {string} name - å›¾æ ‡åç§°
 * @param {Object} options - é€‰é¡¹
 * @returns {Element} SVG DOM å…ƒç´ 
 */
export function createIcon(name, options = {}) {
    const { size = 16, className = '' } = options;
    const template = document.createElement('template');
    template.innerHTML = getIcon(name, { size, className });
    return template.content.firstChild;
}

/**
 * Emoji åˆ°å›¾æ ‡æ˜ å°„
 */
export const emojiToIcon = {
    'ğŸ”§': 'tool',
    'ğŸ”': 'search',
    'âš™ï¸': 'settings',
    'ğŸ“¦': 'package',
    'ğŸ”Œ': 'plug',
    '': 'checkCircle',
    'âŒ': 'xCircle',
    'â±ï¸': 'clock',
    'ğŸ”„': 'loader',
    'âš ï¸': 'alertCircle',
    'ğŸŒ': 'globe',
    'ğŸ“': 'fileText',
    'âœï¸': 'edit',
    'ğŸ“Š': 'barChart',
    'â­': 'star',
    'â—': 'circleFill',
    'â—‹': 'circle',
    'â•': 'plus',
    'âœ•': 'x',
    'ğŸ–¥ï¸': 'computer',
    'ğŸ“': 'folder',
    'ğŸ“Œ': 'pin',
    'ğŸ’¬': 'message'
};

/**
 * æ›¿æ¢æ–‡æœ¬ä¸­çš„ emoji ä¸º SVG å›¾æ ‡
 * @param {string} text - åŒ…å« emoji çš„æ–‡æœ¬
 * @param {Object} options - å›¾æ ‡é€‰é¡¹
 * @returns {string} æ›¿æ¢åçš„ HTML
 */
export function replaceEmojis(text, options = {}) {
    let result = text;
    for (const [emoji, iconName] of Object.entries(emojiToIcon)) {
        const regex = new RegExp(emoji, 'g');
        result = result.replace(regex, getIcon(iconName, options));
    }
    return result;
}
